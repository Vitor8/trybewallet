(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{28:function(e,t,a){},34:function(e,t,a){e.exports=a(47)},43:function(e,t,a){},45:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(13),c=a.n(l),s=a(21),o=a(11),i=a(8),u=a(30),m=a(31),d={email:""},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return{email:t.payload};default:return e}},p=a(33),E=a(6),b={currencies:[],expenses:[]},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_CURRENCIES":return Object(E.a)(Object(E.a)({},e),{},{currencies:t.payload});case"ADD_EXPENSE":return Object(E.a)(Object(E.a)({},e),{},{expenses:[].concat(Object(p.a)(e.expenses),[t.payload])});case"REMOVE_EXPENSE":return Object(E.a)(Object(E.a)({},e),{},{expenses:t.payload});default:return e}},f=Object(i.combineReducers)({user:h,wallet:v}),g=Object(i.createStore)(f,Object(u.composeWithDevTools)(Object(i.applyMiddleware)(m.a))),y=(a(43),a(2)),N=a(15),w=a(16),x=a(17),C=a(9),O=a(19),j=a(18),k=a(23),S=a.n(k),D=a(32),T=function(e){return{type:"SAVE_CURRENCIES",payload:e}},R=(a(45),function(e){Object(O.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(w.a)(this,a),(n=t.call(this,e)).state={email:"",password:"",isDisabled:!0,shouldRedirectToWallet:!1},n.shouldEnableButton=n.shouldEnableButton.bind(Object(C.a)(n)),n.redirectToWallet=n.redirectToWallet.bind(Object(C.a)(n)),n.handleChange=n.handleChange.bind(Object(C.a)(n)),n}return Object(x.a)(a,[{key:"handleChange",value:function(e){var t=this,a=e.target;this.setState(Object(N.a)({},a.name,a.value),(function(){return t.shouldEnableButton()}))}},{key:"verifyEmail",value:function(e){return/[^@ \t\r\n]+@[^@ \t\r\n]+\.[^@ \t\r\n]+/.test(e)}},{key:"shouldEnableButton",value:function(){var e=this.state,t=e.email,a=e.password;return this.verifyEmail(t)&&a.length>=6?this.setState({isDisabled:!1}):this.setState({isDisabled:!0})}},{key:"redirectToWallet",value:function(){(0,this.props.saveEmail)(this.state.email),this.setState({shouldRedirectToWallet:!0})}},{key:"render",value:function(){var e=this,t=this.state,a=t.isDisabled,n=t.shouldRedirectToWallet;return r.a.createElement("div",{className:"login-container"},r.a.createElement("label",{htmlFor:"email"},"Email",r.a.createElement("input",{name:"email",type:"email",id:"email","data-testid":"email-input",onChange:this.handleChange,className:"login-inputs"}))," ",r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"password"},"Senha",r.a.createElement("input",{name:"password",type:"password",id:"password","data-testid":"password-input",onChange:this.handleChange,className:"login-inputs"}))," ",r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement("button",{type:"button",disabled:a,onClick:function(){return e.redirectToWallet()},className:"button-login"},"Entrar"),r.a.createElement("span",null,n?r.a.createElement(y.a,{to:"/carteira"}):r.a.createElement("div",null)))}}]),a}(r.a.Component)),F=Object(o.b)(null,(function(e){return{saveEmail:function(t){return e(function(e){return{type:"LOGIN",payload:e}}(t))}}}))(R);a(28);var M=function(){return r.a.createElement("tr",{className:"header-table"},r.a.createElement("th",{className:"header-title"},"Descri\xe7\xe3o"),r.a.createElement("th",{className:"header-title"},"Tag"),r.a.createElement("th",{className:"header-title"},"M\xe9todo de pagamento"),r.a.createElement("th",{className:"header-title"},"Valor"),r.a.createElement("th",{className:"header-title"},"Moeda"),r.a.createElement("th",{className:"header-title"},"C\xe2mbio utilizado"),r.a.createElement("th",{className:"header-title"},"Valor convertido"),r.a.createElement("th",{className:"header-title"},"Moeda de convers\xe3o"),r.a.createElement("th",{className:"header-title"},"Editar/Excluir"))};var A=function(e){var t=e.userEmail,a=e.totalExpense,n=e.currentCurrency,l=Math.round(100*a)/100;return r.a.createElement("header",{className:"header-wallet"},r.a.createElement("img",{className:"logo-header",src:"https://res.cloudinary.com/crunchbase-production/image/upload/v7oifu5eirdxepzyg0p0",width:"45px",height:"45px",alt:"logo-trybe"}),r.a.createElement("p",{"data-testid":"email-field"},"Email",r.a.createElement("label",{htmlFor:"userEmail",className:"data-header"},t)),r.a.createElement("p",{"data-testid":"total-field"},"Despesa Total",r.a.createElement("label",{className:"data-header",htmlFor:"totalExpense"},l)),r.a.createElement("p",{"data-testid":"header-currency-field"},"C\xe2mbio Atual",r.a.createElement("label",{className:"data-header",htmlFor:"currentCurrency"},n)))},W=function(e){Object(O.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(w.a)(this,a),(n=t.call(this,e)).state={totalExpense:0,currentCurrency:"BRL",shouldRenderForm:!1,value:"",description:"",chosenCurrency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"},n.showCurrencies=n.showCurrencies.bind(Object(C.a)(n)),n}return Object(x.a)(a,[{key:"componentDidMount",value:function(){this.showCurrencies()}},{key:"removeExpense",value:function(e){var t=this.props,a=t.expenses,n=t.removeExpense,r=a.filter((function(t){return t.id!==e})),l=0;r.forEach((function(e){var t=e.value*e.exchangeRates[e.currency].ask;l+=t})),this.setState((function(e){return Object(E.a)(Object(E.a)({},e),{},{totalExpense:l})})),n(r)}},{key:"showCurrencies",value:function(){(0,this.props.getCurrencies)(),this.setState({shouldRenderForm:!0})}},{key:"addExpense",value:function(){(0,this.props.getCurrencies)();var e=this.state,t=e.value,a=e.description,n=e.chosenCurrency,r=e.method,l=e.tag,c=this.props,s=c.currencies;(0,c.addNewExpense)({id:c.expenses.length,value:t,currency:n,method:r,tag:l,description:a,exchangeRates:s});var o=s[n].ask;this.setState((function(e){return Object(E.a)(Object(E.a)({},e),{},{totalExpense:e.totalExpense+t*o})}))}},{key:"renderMethodAndTag",value:function(){var e=this;return r.a.createElement("div",{className:"method-tag-wallet"},r.a.createElement("label",{htmlFor:"pagamento"},"M\xe9todo de pagamento",r.a.createElement("select",{id:"pagamento",onChange:function(t){return e.setState({method:t.target.value})},className:"input-wallet-method"},r.a.createElement("option",{value:"Dinheiro"},"Dinheiro"),r.a.createElement("option",{value:"Cart\xe3o de cr\xe9dito"},"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",{value:"Cart\xe3o de d\xe9bito"},"Cart\xe3o de d\xe9bito"))),r.a.createElement("label",{htmlFor:"tag"},"Tag",r.a.createElement("select",{id:"tag",onChange:function(t){return e.setState({tag:t.target.value})},className:"input-wallet-tag"},r.a.createElement("option",{value:"Alimenta\xe7\xe3o"},"Alimenta\xe7\xe3o"),r.a.createElement("option",{value:"Lazer"},"Lazer"),r.a.createElement("option",{value:"Trabalho"},"Trabalho"),r.a.createElement("option",{value:"Transporte"},"Transporte"),r.a.createElement("option",{value:"Sa\xfade"},"Sa\xfade"))))}},{key:"renderTable",value:function(){var e=this,t=this.props.expenses;return r.a.createElement("div",null,r.a.createElement("table",{className:"table"},r.a.createElement(M,null),t.map((function(t,a){var n=t.value,l=t.exchangeRates[t.currency].ask,c=n*l;return r.a.createElement("tr",{key:a,className:"row-table"},r.a.createElement("td",{className:"table-content"},t.description),r.a.createElement("td",{className:"table-content"},t.tag),r.a.createElement("td",{className:"table-content"},t.method),r.a.createElement("td",{className:"table-content"},t.value),r.a.createElement("td",{className:"table-content"},t.exchangeRates[t.currency].name),r.a.createElement("td",{className:"table-content"},Math.round(100*l)/100),r.a.createElement("td",{className:"table-content"},Math.round(100*c)/100),r.a.createElement("td",{className:"table-content"},"Real"),r.a.createElement("td",{className:"table-content"},r.a.createElement("button",{value:t.id,type:"button","data-testid":"delete-btn",onClick:function(){return e.removeExpense(t.id,c)}},"Deletar")))}))))}},{key:"renderHeader",value:function(){var e=this.props.userEmail,t=this.state,a=t.totalExpense,n=t.currentCurrency;return r.a.createElement(A,{userEmail:e,totalExpense:a,currentCurrency:n})}},{key:"renderForm",value:function(){var e=this,t=this.props.currencies;return r.a.createElement("form",{className:"form-wallet"},r.a.createElement("label",{htmlFor:"value"},"Valor",r.a.createElement("input",{id:"value",type:"text",name:"valor",onChange:function(t){return e.setState({value:t.target.value})},className:"input-wallet-value"})),r.a.createElement("label",{htmlFor:"moeda"},"Moeda",r.a.createElement("select",{id:"moeda",onChange:function(t){return e.setState({chosenCurrency:t.target.value})},className:"input-wallet-currency"},Object.keys(t).map((function(e){return"USDT"!==e&&"DOGE"!==e?r.a.createElement("option",{key:e,value:e},e):null})))),this.renderMethodAndTag(),r.a.createElement("label",{htmlFor:"description",className:"label-wallet-description"},r.a.createElement("span",null,"Descri\xe7\xe3o"),r.a.createElement("textarea",{id:"description",type:"text",name:"description",onChange:function(t){return e.setState({description:t.target.value})},className:"input-wallet-description"})),r.a.createElement("button",{type:"button",onClick:function(){return e.addExpense()},className:"button"},"Adicionar despesa"))}},{key:"render",value:function(){var e=this.state.shouldRenderForm,t=this.props.expenses;return r.a.createElement("div",null,r.a.createElement("span",null,this.renderHeader()),r.a.createElement("span",null,e?this.renderForm():r.a.createElement("p",null,"Carregando...")),r.a.createElement("div",null,0===t.length?r.a.createElement("div",null):this.renderTable()))}}]),a}(r.a.Component),B=Object(o.b)((function(e){return{userEmail:e.user.email,currencies:e.wallet.currencies,expenses:e.wallet.expenses}}),(function(e){return{getCurrencies:function(){e(function(){var e=Object(D.a)(S.a.mark((function e(t){var a,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://economia.awesomeapi.com.br/json/all");case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,t(T(n));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},addNewExpense:function(t){return e({type:"ADD_EXPENSE",payload:t})},removeExpense:function(t){return e({type:"REMOVE_EXPENSE",payload:t})}}}))(W);var V=function(){return r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/",component:F}),r.a.createElement(y.b,{path:"/carteira",component:B}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(o.a,{store:g},r.a.createElement(s.a,{basename:"/trybewallet"},r.a.createElement(V,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[34,1,2]]]);
//# sourceMappingURL=main.f2c64e7b.chunk.js.map